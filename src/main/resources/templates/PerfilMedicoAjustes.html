<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Perfil M√©dico</title>
    <link rel="icon" type="image/png" href="/icono.png" />
    <link rel="stylesheet" href="/estilosAdministrativos.css" />
    <link rel="stylesheet" href="/responsive.css" />
    <link rel="stylesheet" href="/mensajes-comunes.css" />
    <link rel="stylesheet" href="/dropdown-menu.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  </head>
  <body class="dark-mode">
    <input type="checkbox" id="theme-toggle" style="display: none" />

    <!-- Label que act√∫a como bot√≥n -->
    <label
      for="theme-toggle"
      style="
        cursor: pointer;
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #005b9f;
        color: white;
        padding: 10px;
        border-radius: 5px;
      "
      >üåô</label
    >
    <nav>
      <p class="logo">
        Dr. <span th:text="${medico != null ? medico.nombre + ' ' + medico.apellido : 'M√©dico Independiente'}">M√©dico Independiente</span>
      </p>
      <div class="nav_bar">
        <a href="/paciente">Pacientes</a>
        <a href="/gestionCitas">Gesti√≥n de Citas</a>
        <a href="/historialCitas">Historial</a>
        <a href="/calendarioMedico">Calendario</a>
        <a href="/dictamen">Dict√°menes</a>
        <a href="/horario">Horarios</a>
        <div class="dropdown">
          <a href="#" class="dropdown-toggle active">
            <i class="fas fa-cog"></i> Ajustes <i class="fas fa-chevron-down"></i>
          </a>
          <div class="dropdown-menu">
            <a href="/PerfilMedicoAjustes" class="dropdown-item">
              <i class="fas fa-user-md"></i> Perfil M√©dico
            </a>
            <form action="/logout" method="post" style="margin: 0;">
              <button type="submit" class="dropdown-item logout-item">
                <i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n
              </button>
            </form>
          </div>
        </div>
      </div>
    </nav>

    <div class="info-box">
      <h3>Informaci√≥n de la cuenta</h3>
      <p><strong>Email:</strong> <span th:text="${medico.email}"></span></p>
      <p th:if="${medico.googleId != null && medico.googleId != ''}">
        <strong>Cuenta vinculada con:</strong> Google OAuth
      </p>
    </div>

    <h2>Actualizar Datos del Perfil</h2>
    <form action="/actualizarPerfil" method="post">
      <label>Nombre:</label>
      <input
        type="text"
        name="nombre"
        th:value="${medico.nombre}"
        required
      /><br /><br />

      <label>C√©dula / Documento:</label>
      <input
        type="text"
        name="cedula"
        th:value="${medico.cedula}"
        required
        readonly
      /><br /><br />

      <label>Tel√©fono:</label>
      <input
        type="text"
        name="telefono"
        th:value="${medico.telefono}"
        required
      /><br /><br />

      <button type="submit">Actualizar Perfil</button>
    </form>

    <h2>Cambiar Contrase√±a</h2>
    <form action="/actualizarPerfil" method="post">
      <input type="hidden" name="nombre" th:value="${medico.nombre}" />
      <input type="hidden" name="cedula" th:value="${medico.cedula}" />
      <input type="hidden" name="telefono" th:value="${medico.telefono}" />

      <div th:if="${medico.password != null && medico.password != ''}">
        <label>Contrase√±a Actual:</label>
        <input type="password" name="passwordActual" /><br /><br />
      </div>

      <label>Nueva Contrase√±a:</label>
      <input type="password" name="passwordNueva" /><br /><br />

      <button type="submit">Cambiar Contrase√±a</button>
    </form>

    <div
      style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px"
    >
      <h3>Sesi√≥n</h3>
      <form action="/logout" method="post">
        <button
          type="submit"
          class="btn-logout"
          style="
            background-color: #dc3545;
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
          "
        >
          <i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n
        </button>
      </form>
    </div>
    <script src="dark-mode.js"></script>
    <script src="dropdown-menu.js"></script>
  </body>
</html>
